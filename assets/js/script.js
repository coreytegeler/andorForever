// Generated by CoffeeScript 1.10.0
(function() {
  $(function() {
    var $body, $curtain, $stairs, transEnd;
    transEnd = 'transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd';
    $body = $('body');
    $curtain = $('#curtain');
    $stairs = $('#stairs');
    $body.on('mousewheel', function(e) {
      var y;
      if ($stairs.is('.open')) {
        return false;
      }
      y = parseInt($curtain.css('y')) - e.deltaY;
      if (y >= $(this).innerHeight()) {
        y = $(this).innerHeight();
      }
      if (y <= 0) {
        y = 0;
      }
      return $curtain.transition({
        y: y
      }, 0);
    });
    return $body.on('click', '.stair a', function(e) {
      var $project, projectTop;
      e.preventDefault();
      $project = $(this).parents('.project');
      if ($project.is('.open')) {
        $project.removeClass('open');
        return $stairs.removeClass('open');
      } else {
        $project.addClass('open');
        $stairs.addClass('open');
        $curtain.css({
          y: $(window).innerHeight()
        });
        projectTop = $project.position().top;
        return $stairs.scrollTop(projectTop - 30);
      }
    });
  });

}).call(this);
